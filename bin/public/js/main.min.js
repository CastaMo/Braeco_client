/*! braeco_client 2015-11-29 */
var getDishJSON=function(){var a='[{"0":{"0":{"0":{"id":125,"name":"1","price":2},"1":{"id":126,"name":"2","price":3},"2":{"id":127,"name":"3","price":4},"groupid":83,"groupname":"233"},"dishid":36,"dishname":"雪顶冰茶","dishname2":"Snowcap Tea","dishpic":"http://static.brae.co/images/dish/0fjlhjen3o9i52a3rout5ospkc7hawzb.png","defaultprice":12,"tag":"212","dc_type":"limit","dc":45},"1":{"dishid":33,"dishname":"柠檬红茶","dishname2":"Lemon Tea","dishpic":"http://static.brae.co/images/dish/76nf7n7cjdelmrp46cok9ii6se0h2ak9.png","defaultprice":12,"tag":null,"dc_type":"none"},"2":{"0":{"0":{"id":137,"name":"2","price":2},"groupid":88,"groupname":"属性组1"},"dishid":106,"dishname":"23","dishname2":"","dishpic":"http://static.brae.co/images/dish/exvbv462dhmlyj3fed3z0avmlvbaf2qt.png","defaultprice":23,"tag":null,"dc_type":"none"},"3":{"0":{"0":{"id":128,"name":"a","price":1},"1":{"id":129,"name":"b","price":2},"groupid":84,"groupname":"属性组1"},"1":{"0":{"id":130,"name":"c","price":1},"1":{"id":138,"name":"","price":1},"groupid":85,"groupname":"属性组2"},"dishid":103,"dishname":"哈哈","dishname2":"aa","dishpic":"http://static.brae.co/images/dish/nktebx8d1zwukflj2zsugur34tdkp1kd.png","defaultprice":10,"tag":null,"dc_type":"none"},"4":{"dishid":81,"dishname":"shfhsh","dishname2":"adgg","dishpic":"http://static.brae.co/images/dish/qq0nbdadq8jskoq0fbf4ko4u3po4ot6e.png","defaultprice":5,"tag":null,"dc_type":"none"},"5":{"0":{"0":{"id":64,"name":"1","price":1},"groupid":38,"groupname":"12"},"dishid":31,"dishname":"桂圆红枣茶","dishname2":"Longon Dates Tea","dishpic":"http://static.brae.co/images/dish/u5fzmktf1f7o21uo7vx6w210jrhp5kc0.png","defaultprice":11,"tag":"热销","dc_type":"half"},"categoryid":9,"categoryname":"健康茶饮啊啊啊"},{"0":{"dishid":96,"dishname":"喔","dishname2":"23","dishpic":"http://static.brae.co/images/dish/dfptc0sea7n0eudtkl5xh49cd7ci5hgi.png","defaultprice":0.01,"tag":null,"dc_type":"discount","dc":20},"1":{"0":{"0":{"id":105,"name":"hh","price":0},"1":{"id":101,"name":"啊啊啊啊哈哈","price":999},"groupid":68,"groupname":"属性组啊噢噢"},"1":{"0":{"id":100,"name":"宝宝宝宝宝宝","price":0},"groupid":66,"groupname":"属性组噢噢属"},"dishid":76,"dishname":"哈哈哈哈3","dishname2":"212312jjjjj","dishpic":"http://static.brae.co/images/dish/y1ej0mw11pzmk5fnjm5npx4hjeqxl0yk.png","defaultprice":176.34,"tag":"好","dc_type":"half"},"categoryid":11,"categoryname":"店长推荐  "},{"0":{"dishid":41,"dishname":"黑森林蛋糕","dishname2":"Dark Forest Cake","dishpic":"http://static.brae.co/images/dish/9f9u52gqj86e72r56tyn08dc244w3c7c.png","defaultprice":17,"tag":"店长推荐","dc_type":"half"},"1":{"0":{"0":{"id":83,"name":"巧克力","price":1},"1":{"id":123,"name":"蓝莓","price":2},"groupid":56,"groupname":"属性组1"},"dishid":39,"dishname":"慕斯蛋糕","dishname2":"Mousse Cake","dishpic":"http://static.brae.co/images/dish/0tljzbtadorhn64jmtt92dualzsypz1q.png","defaultprice":15,"tag":"热销","dc_type":"discount","dc":80},"2":{"dishid":40,"dishname":"栗子蛋糕","dishname2":"Chestnut Cake","dishpic":"http://static.brae.co/images/dish/5kir1umk5tlu2wtcdck7nz49vhqqf3ck.png","defaultprice":17,"tag":null,"dc_type":"sale","dc":2},"categoryid":10,"categoryname":"蛋糕 你"},{"0":{"0":{"0":{"id":39,"name":"港式","price":1},"1":{"id":40,"name":"鸳鸯","price":3},"2":{"id":38,"name":"经典","price":18},"groupid":18,"groupname":"主题"},"1":{"0":{"id":33,"name":"冷","price":16},"1":{"id":34,"name":"热","price":19},"groupid":16,"groupname":"温度"},"dishid":29,"dishname":"主题奶茶","dishname2":"Theme milk tea","dishpic":"http://static.brae.co/images/dish/bqm3y6xclneemzuncr226hbmohjxcbco.png","defaultprice":13,"tag":null,"dc_type":"half"},"1":{"dishid":43,"dishname":"经典奶茶","dishname2":"classic millk tea","dishpic":"http://static.brae.co/images/dish/vnncrcp8vkfkkvq8zqdmurjj0snza4e5.png","defaultprice":15,"tag":null,"dc_type":"none"},"2":{"dishid":62,"dishname":"奶盖茶饮","dishname2":"milk tea","dishpic":"http://static.brae.co/images/dish/v7uvlqdwe0b4c2oofybr0h6ctn8jblv6.png","defaultprice":9,"tag":"呢呢呢","dc_type":"half"},"categoryid":8,"categoryname":"奶 "},{"0":{"0":{"0":{"id":27,"name":"加冰","price":1},"1":{"id":26,"name":"焦糖","price":2},"groupid":13,"groupname":"做法"},"dishid":25,"dishname":"拿铁","dishname2":"Latte","dishpic":"http://static.brae.co/images/dish/juhvz6fyznnajkcjk6t1okrhq2ij7ivq.png","defaultprice":20,"tag":"热销","dc_type":"sale","dc":2},"1":{"0":{"0":{"id":110,"name":"1","price":1},"1":{"id":109,"name":"2","price":2},"2":{"id":111,"name":"3","price":2},"groupid":72,"groupname":"属性组2"},"1":{"0":{"id":25,"name":"热","price":9},"1":{"id":23,"name":"冰","price":15},"groupid":12,"groupname":"温度"},"dishid":23,"dishname":"艾晨斯特调","dishname2":"Actions Special Made","dishpic":"http://static.brae.co/images/dish/jp3o0x8xkaxy5y8pfui9hq137a0t4mto.png","defaultprice":13,"tag":"hh","dc_type":"sale","dc":1},"2":{"dishid":27,"dishname":"摩卡奇诺","dishname2":"Mochacino","dishpic":"http://static.brae.co/images/dish/pbjyz1lb1uvseigf55fe13p37e9dgd36.png","defaultprice":20,"tag":null,"dc_type":"none"},"categoryid":7,"categoryname":"美式咖啡"}]';return a},getActivityJSON=function(){var a='[{"date_begin":"2015-10-09","date_end":"2015-10-30","id":54,"dinnerid":3,"title":"afasd<span>（已经结束）</span>","intro":null,"content":"asdfafsafsaf","pic":"http://static.brae.co/images/activity/agwqur54o8qyndj4892r0opqfsamsx93.png?imageView2/1/w/120/h/120","button":0,"is_valid":false,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/agwqur54o8qyndj4892r0opqfsamsx93.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-02","date_end":"2015-10-17","id":55,"dinnerid":3,"title":"test<span>（已经结束）</span>","intro":"asdfasfsa","content":"asdfasfdasdfasfd","pic":"http://static.brae.co/images/activity/ijtfm9usr37ug1c9s7ti9dp901qlez4x.png?imageView2/1/w/120/h/120","button":0,"is_valid":false,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/ijtfm9usr37ug1c9s7ti9dp901qlez4x.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-08","date_end":"2015-10-29","id":56,"dinnerid":3,"title":"大师傅撒<span>（已经结束）</span>","intro":"asdfasfsa","content":"阿斯顿发顺丰","pic":"http://static.brae.co/images/activity/ixc567xya4tr660ydugn76w77nsmmwj5.png?imageView2/1/w/120/h/120","button":0,"is_valid":false,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/ixc567xya4tr660ydugn76w77nsmmwj5.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-02","date_end":"2015-12-31","id":59,"dinnerid":3,"title":"asdfasdf","intro":"全场满<strong>10</strong>减<strong>2</strong>","content":"fdsadsdagdsag","pic":"http://static.brae.co/images/activity/9xad2qruww3ffse5n82vhl179e0m6xog.png?imageView2/1/w/120/h/120","button":0,"is_valid":true,"type":"reduce","detail":[{"least":10,"reduce":2}],"cover":"http://static.brae.co/images/activity/9xad2qruww3ffse5n82vhl179e0m6xog.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-01","date_end":"2015-10-30","id":64,"dinnerid":3,"title":"阿什福<span>（已经结束）</span>","intro":null,"content":"发士大夫撒法","pic":"http://static.brae.co/images/activity/2z2mfz7rw7mhn2irzm2j19vn9w2c4dt7.png?imageView2/1/w/120/h/120","button":0,"is_valid":false,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/2z2mfz7rw7mhn2irzm2j19vn9w2c4dt7.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-01","date_end":"2015-10-31","id":66,"dinnerid":3,"title":"asd<span>（已经结束）</span>","intro":null,"content":"123","pic":"http://static.brae.co/images/activity/m76comqsbrzfjbgkfaf1ogre2c5kzs9l.png?imageView2/1/w/120/h/120","button":0,"is_valid":false,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/m76comqsbrzfjbgkfaf1ogre2c5kzs9l.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-01","date_end":"2015-10-23","id":67,"dinnerid":3,"title":"1234<span>（已经结束）</span>","intro":null,"content":"123","pic":"http://static.brae.co/images/activity/umr7nsvg7zrbwbr2c984f9pgq9jigzsa.png?imageView2/1/w/120/h/120","button":0,"is_valid":false,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/umr7nsvg7zrbwbr2c984f9pgq9jigzsa.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-01","date_end":"2015-12-31","id":69,"dinnerid":3,"title":"123","intro":"全场满<strong>222</strong>送<strong>你好</strong>","content":"123","pic":"http://static.brae.co/images/activity/pgo2cq0nss5cc81v7ar2wplw5wexehq4.png?imageView2/1/w/120/h/120","button":0,"is_valid":true,"type":"give","detail":[{"least":222,"dish":"你好"}],"cover":"http://static.brae.co/images/activity/pgo2cq0nss5cc81v7ar2wplw5wexehq4.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-01","date_end":"2015-12-16","id":73,"dinnerid":3,"title":"213","intro":null,"content":"21","pic":"http://static.brae.co/images/activity/zkd1jixngl25u8hif0546rnuw2818437.png?imageView2/1/w/120/h/120","button":0,"is_valid":true,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/zkd1jixngl25u8hif0546rnuw2818437.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-01","date_end":"2015-12-31","id":74,"dinnerid":3,"title":"测试","intro":"啊","content":"1","pic":"http://static.brae.co/images/activity/9xnqj4sljc7yf4v0v55da3v8a9d2slo1.png?imageView2/1/w/120/h/120","button":0,"is_valid":true,"type":"other","detail":"啊","cover":"http://static.brae.co/images/activity/9xnqj4sljc7yf4v0v55da3v8a9d2slo1.png?imageView2/1/w/432/h/240"}]';return a},getMemberJSON=function(){var a='{"message":"success","user":4,"birthday":0,"nickname":"Casta","sex":"男","province":"广东","city":"东莞","country":"中国","avatar":"http://static.brae.co/images/avatar/q13xybp6x3102no7pn8r6g91gz070oeq.png?imageView2/1/w/60/h/60","signature":"天涯咫尺","register_time":1436878924,"mobile":"18819473259","membership":{"ladder":[{"name":"黑铁","EXP":0,"discount":100},{"name":"青铜","EXP":1000,"discount":90},{"name":"白银","EXP":2000,"discount":88},{"name":"黄金","EXP":3000,"discount":85},{"name":"白金","EXP":5000,"discount":80},{"name":"钻石","EXP":8000,"discount":75}],"EXP":34100,"balance":3899.43}}';return a},getComPreJSON=function(){var a="15";return a},indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};!function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P;return J=[util.addListener,util.removeListener,util.hasClass,util.addClass,util.removeClass,util.ajax,util.getElementsByClassName,util.isPhone,util.hidePhone,util.query,util.querys,util.remove,util.append,util.prepend,util.toggleClass,util.getObjectURL,util.deepCopy,util.getById,util.createDom,util.getJSON,util.getAdaptHeight],l=J[0],M=J[1],z=J[2],k=J[3],L=J[4],m=J[5],w=J[6],D=J[7],B=J[8],H=J[9],I=J[10],K=J[11],n=J[12],G=J[13],O=J[14],y=J[15],t=J[16],v=J[17],s=J[18],x=J[19],u=J[20],q=b.body.clientWidth,p=b.documentElement.clientHeight,E=null,P=null,r=["","-webkit-","-moz-","-ms-","-o-"],F=["零","一","二","三","四","五","六","七","八","九","十"],d=function(){function a(a){t(a,this),this.init(),v(),e.push(this)}var b,c,d,e,f,g,h,i,j,m,o,p,q,r,u,v,w;return f=H("#Menu-page .category-display-list"),b=H("#book-category-wrap .tag-list"),h=H("#book-dish-wrap .food-list-wrap"),c=0,e=[],d=0,w={letter:10,number:11,space:6,chinese:16},m=function(a){var b,c,d,e;return b=s("li"),b.id="category-"+a.seqNum,e=a.url||"",c="<img alt='标签' class='category-img' src="+e+">",d="<div class='category-name-field'><p class='category-name'>"+a.name+"</div>",b.innerHTML=""+c+d,n(f,b),b},i=function(a){var d,e;return d=s("li"),d.id="tag-list-"+a.seqNum,d.innerHTML=a.name,e=p(a.name),d.style.width=e+"px",n(b,d),c+=e+30,d},o=function(a){var b;return b=s("ul"),b.id="food-list-"+a.seqNum,b.className="hide",n(h,b),b},p=function(a){var b,c,d,e,f,g,h;return c=a.match(/[a-z]/gi)||[],e=a.match(/[0-9]/gi)||[],g=a.match(/\s/gi)||[],d=c.length,f=e.length,h=g.length,b=a.length-d-f-h,w.letter*d+w.number*f+w.space*h+w.chinese*b+1},v=function(){return b.style.width=c+"px"},q=function(){var a,b,c,d;for(d=[],b=0,c=e.length;c>b;b++)a=e[b],d.push(k(a.foodListDom,"hide"));return d},u=function(){var a,b,c,d;for(d=[],b=0,c=e.length;c>b;b++)a=e[b],d.push(L(a.bookCategoryDom,"choose"));return d},g=function(){return u(),q(),j(),k(e[d].bookCategoryDom,"choose"),L(e[d].foodListDom,"hide"),setTimeout(function(){return e[d].bookCategoryDom.scrollIntoView()},0)},r=function(a){return d=a,E.set("categoryCurrentChoose",a)},j=function(){var a;return a=E.get("categoryCurrentChoose")||0,d=e[a]?Number(a):0},a.prototype.init=function(){return this.initDisplayDom(),this.initBookCategoryDom(),this.initFoodListDom(),this.initEvent()},a.prototype.initDisplayDom=function(){return this.displayDom=m(this)},a.prototype.initBookCategoryDom=function(){return this.bookCategoryDom=i(this)},a.prototype.initFoodListDom=function(){return this.foodListDom=o(this)},a.prototype.initEvent=function(){var a;return a=this,l(a.displayDom,"click",function(){return r(a.seqNum),A.hashJump("-Detail-Book-bookCol")}),l(a.bookCategoryDom,"click",function(){return r(a.seqNum),g()})},a.initial=function(){var b,c,d,e,f,g,h;for(c=x(getDishJSON()),g=[],d=e=0,f=c.length;f>e;d=++e)h=c[d],g.push(b=new a({name:h.categoryname,id:h.id,seqNum:d}));return g},a.chooseBookCategoryByCurrentChoose=g,a}(),e=function(){function a(a){t(a,this),this.init(),h[this.categorySeqNum].push(this)}var b,c,d,e,f,g,h,i,j,k,m,o,p,r,w,y,z,B,C;return b=v("book-dish-wrap"),d=v("book-info-wrap"),f=H(".food-img-wrapper img",d),f.style.height=200*q/375+"px",e=H(".full-part",d),g=H(".intro-wrap .intro",d),h=[],c=[0,0],k=function(a){var b,c;return b="","discount"===a.dcType?(c=a.dc,c=a.dc%10===0?F[Math.round(a.dc/10)]:a.dc/10,b="<p class='dc-label'>"+c+"折</p>"):"sale"===a.dcType?b="<p class='dc-label'>减"+a.dc+"元</p>":"half"===a.dcType?b="<p class='dc-label'>第二杯半价</p>":"limit"===a.dcType&&(b="<p class='dc-label'>剩"+a.dc+"件</p>"),b},y=function(a){var b;return b="",a.tag&&(b="<p class='tag-label'>"+a.tag+"</p>"),b},z=function(a){var b,c,d;return d=s("div"),d.className="top-wrap",c="<div class='name-field'> <p class='c-name'>"+a.cName+"</p> <p class='e-name'>"+a.eName+"</p> </div>",b="<div class='label-field'> "+k(a)+" "+y(a)+" </div>",n(d,c),n(d,b),d},w=function(a){var b;return"none"!==a.dcType&&"half"!==a.dcType&&a.dcType&&"limit"!==a.dcType?"discount"===a.dcType?b="<p class='min-price money'>"+Number((a.defaultPrice*a.dc/100).toFixed(2))+"</p>":"sale"===a.dcType&&(b="<p class='min-price money'>"+Number((a.defaultPrice-a.dc).toFixed(2))+"</p>"):b="<p class='min-price money'>"+a.defaultPrice+"</p>",b},r=function(a){var b;return b="<p class='init-price money'>"+a.defaultPrice+"</p>","none"!==a.dcType&&"half"!==a.dcType&&a.dcType&&"limit"!==a.dcType||(b=""),b},i=function(a){var b,c,d;return b=s("div"),b.className="bottom-wrap font-number-word",d="<div class='price-field'> "+w(a)+" "+r(a)+" </div>",c="<div class='controll-field'> <div class='minus-field btn hide'> <div class='img'></div> </div> <div class='number-field hide'> <p class='num'>0</p> </div> <div class='plus-field btn'> <div class='img'></div> </div> </div>",n(b,d),n(b,c),b},o=function(a){var b;return a.url?(b=s("div"),b.className="left-part",b.innerHTML="<div class='img-field'><img src='"+a.url+"'></div>",b):null},p=function(a){var b,c,d;return c=s("div"),a.url?c.className="right-part":c.className="full-part",d=z(a),b=i(a),n(c,d),n(c,b),c},m=function(a){var b,c,d,e,f,g;return c=s("li"),c.id="food-"+a.seqNum,e=s("div"),e.className="food-info-field",f=o(a),g=p(a),f&&n(e,f),n(e,g),n(c,e),d=s("div"),d.className="fivePercentLeftLine",b=H(".food-list-wrap #food-list-"+a.categorySeqNum),n(b,c),n(b,d),c},C=function(a,b){return c[0]=a,c[1]=b,E.set("foodCurrentChoose",JSON.stringify(c))},j=function(){var a;return a=E.get("foodCurrentChoose")||"[0, 0]",a=JSON.parse(a),h[a[0]][a[1]]?t(a,c):c=[0,0]},B=function(){var a,i;return i=h[c[0]][c[1]],d.style.height=u(b,d)+"px",f.src=i.url,a=H(".full-part",i.foodDom)||H(".right-part",i.foodDom),e.innerHTML=a.innerHTML,g.innerHTML=i.intro},a.prototype.init=function(){return this.initFoodDom(),this.initAllEvent()},a.prototype.initFoodDom=function(){return this.foodDom=m(this)},a.prototype.initAllEvent=function(){var a;return a=this,l(a.foodDom,"click",function(){return C(a.categorySeqNum,a.seqNum),A.pushHashStr("bookInfo")})},a.initial=function(){var b,c,d,e,f,g,i,j,k,l;for(b=x(getDishJSON()),d=f=0,j=b.length-1;j>=0?j>=f:f>=j;d=j>=0?++f:--f)b[d]&&(h[d]=[]);for(k=[],d=g=0,i=b.length;i>g;d=++g)l=b[d],e=0,k.push(function(){var b;for(b=[];l[e];)c=new a({dc:l[e].dc,dcType:l[e].dc_type,defaultPrice:l[e].defaultprice,id:l[e].dishid,cName:l[e].dishname,eName:l[e].dishname2,url:l[e].dishpic,categorySeqNum:d,seqNum:e,tag:l[e].tag,intro:l[e].intro||""}),b.push(e++);return b}());return k},a.chooseFoodByCurrentChoose=function(){return j(),B()},a}(),c=function(){function a(a){t(a,this),this.init(),b.push(this)}var b,c,d,e,f,g,h,i,j,k,m,o,p,r,u,v,w,y,z,B,C,D,F,G,I,J;return w=["promotion","theme"],f=H("#Menu-page .activity-display-list"),e=H("#Menu-page .choose-dot-list"),c=H("#Activity-page #Activity-container-column .activity-container-wrapper"),r=null,u=null,v={promotion:0,theme:0},b=[],d=0,p=H(".Activity-information-field"),i=H("#activity-info-img-field .img-field",p),h=H("img",i),o=H(".title-type",p),m=H("#activity-info-title-field .name",p),j=H("#activity-info-title-field .intro",p),k=H("#activity-info-time-field .time",p),g=H("#activity-info-content-field .content",p),i.style.height=.9*q*167/343+"px",B=function(a){var b;return b=s("li"),b.id="activity-"+a.seqNum,b.innerHTML="<img src='"+a.displayUrl+"' alt='活动详情' class='activity-img'>",n(f,b),b},z=function(a){var b;return b=s("li"),b.id="choose-dot-"+a.seqNum,b.className="inactive",b.innerHTML="<div class='dot'></div>",n(e,b),b},y=function(a){var b,c,d,e;return b=s("li"),b.id="activity-basic-info-"+a.seqNum,b.className="activity-basic-info",b.innerHTML="<img src='"+a.detailUrl+"' alt='活动详情'> <div class='info'> <p class='activity-name'>"+a.title+"</p> <p class='activity-intro'>"+a.intro+"</p> </div> <div class='arrow'></div>","theme"===a.type?(e=u,d="theme"):(e=r,d="promotion"),0!==v[d]&&(c=s("div"),c.className="fivePercentLeftLine",n(e,c)),v[d]++,n(e,b),b},C=function(a,b){var d;return d=s("div"),d.id="activity-"+a+"-field",d.innerHTML="<div class='title-field'> <p class='title'>"+b+"</p> </div> <ul class='activity-"+a+"-list'></ul>",n(c,d)},F=function(a){var b,c,d,e,f,g,h,i,j,k,l;for(c={},d=0,f=w.length;f>d;d++)l=w[d],c[l]=!1;for(e=0,g=a.length;g>e;e++)b=a[e],l=b.type||"","theme"===l?c[l]=!0:l&&(c.promotion=!0);for(j=[],i=0,h=w.length;h>i;i++)l=w[i],c[l]?(k="promotion"===l?"促销优惠":"主题活动",j.push(C(l,k))):j.push(void 0);return j},G=function(){return r=H(".activity-promotion-list",c),u=H(".activity-theme-list",c)},J=function(a){return d=a,E.set("activityCurrentChoose",a)},D=function(){var a;return a=E.get("activityCurrentChoose")||0,d=b[a]?Number(a):0},I=function(){var a,c;return a=b[d],c="theme"===a.type?"主题":"促销",h.setAttribute("src",a.detailUrl),o.innerHTML=c,m.innerHTML=a.title,j.innerHTML=a.intro,k.innerHTML=a.dateBegin+" - "+a.dateEnd,g.innerHTML=a.content},a.prototype.init=function(){return this.initActivityHomeDisplayDom(),this.initActivityHomeDisplayChooseDom(),this.initActivityDetailInfoDom(),this.initAllEvent()},a.prototype.initActivityHomeDisplayDom=function(){return this._activityHomeDisplayDom=B(this)},a.prototype.initActivityHomeDisplayChooseDom=function(){return this._activityHomeDisplayChooseDom=z(this)},a.prototype.initActivityDetailInfoDom=function(){return this._activityDetailInfoDom=y(this)},a.prototype.initAllEvent=function(){var a;return a=this,l(a._activityDetailInfoDom,"click",function(){return J(a.seqNum),A.pushHashStr("activityInfo")})},a.initial=function(){var b,c,d,e,f;for(c=x(getActivityJSON()),F(c),G(),d=e=0,f=c.length;f>e;d=++e)b=c[d],b=new a({seqNum:d,id:b.id,displayUrl:b.pic,infoUrl:b.pic,detailUrl:b.pic,dateBegin:b.date_begin,dateEnd:b.date_end,intro:b.intro||"",content:b.content,isValid:b.is_valid,title:b.title,type:b.type});return new N({displayCSSSelector:"#Menu-page .activity-display-list",chooseCSSSelector:"#Menu-page .choose-dot-list",scale:110/377,delay:3e3})},a.chooseActivityByCurrentChoose=function(){return D(),I()},a}(),j=function(){function a(a){this.tryLoginAndUpdateInfo(a)}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;return b=v("Individual-page"),c=H(".Already-login-field",b),o=H(".rank-field p.rank",c),q=H(".rank-field p.member-name",c),p=H(".member-img-pos #rank-img",c),i=H(".discount-field p.discount",c),d=H(".remainder-EXP-Blend p.remainder-number",c),h=H(".current-value",c),g=H(".full-value",c),f=H(".inner-bar",c),m={},n=[],k=function(a){return m.discount=Boolean(1&a),m.sale=Boolean(2&a),m.half=Boolean(4&a),m.limit=Boolean(8&a)},l=function(a){return t(a,n)},j=function(a){var b,c,d,e,f,g;for(c=!0,e=0,d=f=0,g=n.length;g>f;d=++f)if(b=n[d],b.EXP>a.EXP){e=d-1,c=!1;break}return{fullFlag:c,index:e}},s=function(a){var b;return o.innerHTML="Lv."+a.currentRank,p.className="member-rank-"+a.currentRank,q.innerHTML=a.rankName+"级会员",g.innerHTML=a.currentFullEXP,f.style.width="",b=a.discount>=100?"升级后尊享更多优惠":"VIP尊享"+(a.discount/10).toFixed(1)+"折",i.innerHTML=b},r=function(a,b,c){return a.currentRank=b,a.rankName=n[b].name,a.discount=n[b].discount,a.currentFullEXP=n[c].EXP},e=function(a){var b,c,d;return d=j(a),d.fullFlag?(c=n.length-1,b=c):(c=d.index,b=c+1),r(a,c,b),s(a)},a.prototype.isLogin=function(){return 0!==this.id},a.prototype.init=function(){return this.setBalance(this.balance),this.setCurrentEXP(this.EXP)},a.prototype.setBalance=function(a){return this.balance=a,d.innerHTML=this.balance},a.prototype.setCurrentEXP=function(a){return this.EXP=a,h.innerHTML=this.EXP,e(this),f.style.width=100*this.EXP/this.currentFullEXP+"%"},a.prototype.tryLoginAndUpdateInfo=function(a){return t(a,this),this.init()},a.initial=function(){var b,c;return b=x(getComPreJSON()),c=x(getMemberJSON()),k(b),l(c.membership.ladder),P=new a({avatar:c.avatar,birthday:c.birthday,city:c.city,country:c.country,mobile:c.mobile,nickName:c.nickname,province:c.province,registerTime:c.register_time,sex:c.sex,signature:c.signature,id:c.user,EXP:c.membership.EXP,balance:c.membership.balance})},a}(),i=function(){function a(a){t(a,this),this.init()}var b,c,d,e;return b=[50,150,450,750,950],e=H("#Recharge-page .amount-list"),d=0,c=function(a){var b,c;return b=s("li"),b.id="amount-"+a.seqNum,b.innerHTML="<div class='amount-li-field'> <div class='basic-info-field vertical-center'> <p class='money price'>"+a.amountValue+"</p> <p class='get-higher-rank'></p> </div> <div class='choose-field'></div> </div>",0!==d&&(c=s("div"),c.className="fivePercentLeftLine",n(e,c)),n(e,b),d++,b},a.prototype.init=function(){return this.initRechargeDom()},a.prototype.initRechargeDom=function(){return this.rechargeDom=c(this)},a.initial=function(){var c,d,e,f;for(f=[],c=d=0;4>=d;c=++d)f.push(e=new a({seqNum:c,amountValue:b[c]}));return f},a}(),N=function(){function a(a){var b,c,d,e;for(t(a,this),this.displayUlDom=H(this.displayCSSSelector),this.chooseUlDom=H(this.chooseCSSSelector),e=I("img",this.displayUlDom),c=0,d=e.length;d>c;c++)b=e[c],b.style.height=this.scale*q+"px";this.init()}var b,c,d,e,f;return c=function(a,b){var c,d,e,f;for(f={},d=0,e=r.length;e>d;d++)c=r[d],f[c+"transform"]="translate("+a+", "+b+")";return f},b=function(a){var c,d;return d=a,d._autoFlag?(c=(d.currentChoose+1)%d.activityNum,d.setCurrentChooseAndTranslate(c)):d._autoFlag=!0,setTimeout(function(){return b(d)},d.delay)},f=function(a,b){return b._autoFlag=!1,b.startX=a.touches[0].clientX,b.startY=a.touches[0].clientY,b.currentX=a.touches[0].clientX,b.currentY=a.touches[0].clientY},e=function(a,b){return a.preventDefault(),a.stopPropagation(),b._autoFlag=!1,b.currentX=a.touches[0].clientX,b.currentY=a.touches[0].clientY},d=function(a,b){var c,d,e,f,g,h,i;return b._autoFlag=!1,e=b.currentX,f=b.currentY,g=b.startX,h=b.startY,Math.abs(f-h)>=Math.abs(e-g)?void 0:(d=b.currentChoose,c=b.activityNum,g>e?i=(d+1)%c:e>g&&(i=(d-1+c)%c),b.setCurrentChooseAndTranslate(i))},a.prototype.init=function(){return this.initDisplay(),this.initChoose(),this.initAutoRotate(),this.initTouchEvent()},a.prototype.initDisplay=function(){var a,b,c,d;for(this.displayContainerDom=this.displayUlDom.parentNode,this.displayContainerDom.style.overflowX="hidden",this.allDisplayDom=I("li",this.displayUlDom),d=this.allDisplayDom,b=0,c=d.length;c>b;b++)a=d[b],a.style.width=q+"px";return this.activityNum=this.allDisplayDom.length,this.displayUlDom.style.width=q*this.activityNum+"px"},a.prototype.initChoose=function(){var a,b,c,d,e,f,g;for(this.chooseUlDom.parentNode.style.overflow="hidden",g=this,this.allChooseDom=I("li",this.chooseUlDom),this.chooseUlDom.style.width=20*this.allChooseDom.length+"px",this.currentChoose=0,this.allChooseDom[0].className="active",e=this.allChooseDom,f=[],b=c=0,d=e.length;d>c;b=++c)a=e[b],f.push(l(a,"click",function(a){return function(b){return b.preventDefault(),b.stopPropagation(),g._autoFlag=!1,g.setCurrentChooseAndTranslate(a)}}(b)));return f},a.prototype.initAutoRotate=function(){var a;return a=this,this._autoFlag=!0,setTimeout(function(){return b(a)},a.delay)},a.prototype.initTouchEvent=function(){var a;return a=this,l(a.displayContainerDom,"touchstart",function(b){return f(b,a)}),l(a.displayContainerDom,"touchmove",function(b){return e(b,a)}),l(a.displayContainerDom,"touchend",function(b){return d(b,a)})},a.prototype.setCurrentChoose=function(a){return this.allChooseDom[this.currentChoose].className="inactive",this.allChooseDom[a].className="active",this.currentChoose=a},a.prototype.setCurrentChooseAndTranslate=function(a){var b,d,e,f;if(!(0>a||a>=this.activityNum||a===this.currentChoose)){e=-1*a,b=c(e*q+"px",0);for(d in b)f=b[d],this.displayUlDom.style[d]=f;return this.setCurrentChoose(a)}},a}(),f=function(){var a;return a=v("Recharge-func"),l(a,"click",function(){return A.pushHashStr("Extra-extraContent-Recharge")})}(),A=function(){var b,f,g,h,i,j,m,n,o,p,q,r,s,t,u,w,x,y,z,B,C,D,E,F,G,J,K,M,N,O,Q,R,S,T,U,V,W,X,Y,Z,$;return b=function(){var a,b,c,d;return b="",a=I("#nav-field .bottom-field div"),d=function(){var b,c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)b=a[d],c=b.id,b.className=c+"-unchecked",f.push(M(c+"-page"));return f},c=function(a){return b=a,d(),v(a).className=a+"-checked",T(a+"-page")},{bottomTouchEventTrigger:c,uncheckAllForBottomAndHideTarget:d}}(),f=function(){var a;return a=H("#Menu-page .activity-wrapper"),l(a,"click",function(){return Y("-Detail-Activity")})}(),w=v("#extra"),q=I(".main-page"),r=I(".main-home-page"),o=I(".main-detail-page"),j=I(".extra-page"),m=I(".extra-form-page"),h=I(".extra-content-page"),g=H(".Activity-information-field"),t=["activityInfo"],S={Activity:["activityInfo"]},s=["Menu-page","Already-page","Individual-page"],p=["Book-page","Activity-page"],n=["login-page","book-choose-page","remark-for-trolley-page","alert-page","confirm-page"],i=["Recharge-page","Choose-payment-method-page"],N=a.location,y={Home:{push:function(){return T("brae-home-page")},pop:function(){return E()}},Menu:{push:function(){return b.bottomTouchEventTrigger("Menu")},pop:b.uncheckAllForBottomAndHideTarget,title:"餐牌"},Already:{push:function(){return b.bottomTouchEventTrigger("Already")},pop:b.uncheckAllForBottomAndHideTarget,title:"已点订单"},Individual:{push:function(){return b.bottomTouchEventTrigger("Individual")},pop:b.uncheckAllForBottomAndHideTarget,title:"个人信息"},Detail:{push:function(){return T("brae-detail-page")},pop:function(){return E()}},Book:{push:function(){return T("Book-page")},pop:function(){return M("Book-page")}},bookCol:{push:function(){return d.chooseBookCategoryByCurrentChoose(),T("book-order-column")},pop:function(){return M("book-order-column")}},bookInfo:{push:function(){return e.chooseFoodByCurrentChoose(),u("book-info-wrap","hide-right")},pop:function(){return M("book-info-wrap","hide-right")}},bookOrder:{push:function(){return u("book-order-wrap","hide-left")},pop:function(){return M("book-order-wrap","hide-left")}},Activity:{push:function(){return T("Activity-page")},pop:function(){return M("Activity-page")}},activityInfo:{push:function(){return c.chooseActivityByCurrentChoose(),W("activityInfo","Activity",g)},pop:function(){return K(g)}},Extra:{push:function(){return T("extra")},pop:function(){return M("extra")}},extraContent:{push:function(){return T("brae-payment-page")},pop:function(){return M("brae-payment-page")}},Recharge:{push:function(){return T("Recharge-page"),P.isLogin()?void 0:A.back()},pop:function(){return M("Recharge-page")}},choosePaymentMethod:{push:function(){return T("Choose-payment-method-page")},pop:function(){return M("Choose-payment-method-page")}},x:{push:function(){return setTimeout(function(){return Z("x")},0)},pop:function(){return setTimeout(function(){return Z("x")},0)}}},l(a,"popstate",function(){return Q(x())}),X=util.query("title"),R=N.hash.replace("#",""),U=function(a){return setTimeout(function(){return T("extra")},0),indexOf.call(i,a)>=0?(setTimeout(function(){return T("brae-payment-page")},50),setTimeout(function(){return u(a,"hide")},100)):indexOf.call(n,a)>=0?T("brae-form-page"):void 0},D=function(){var a,b,c,d;for(d=[],b=0,c=j.length;c>b;b++)a=j[b],d.push(k(a,"hide"));return d},C=function(){var a,b,c,d;for(d=[],b=0,c=m.length;c>b;b++)a=m[b],d.push(k(a,"hide"));return d},B=function(){var a,b,c,d;for(d=[],b=0,c=h.length;c>b;b++)a=h[b],d.push(k(a,"hide"));return d},z=function(a){return C(),B(),D(),M("extra")},V=function(a){return E(),indexOf.call(s,a)>=0?T("brae-home-page"):indexOf.call(p,a)>=0&&T("brae-detail-page"),T(a),setTimeout("scrollTo(0, 0)",0)},W=function(a,b,c){return indexOf.call(S[b],a)>=0&&L(c,"hide-right"),setTimeout("scrollTo(0, 0)",0)},K=function(a){return k(a,"hide-right")},J=function(){var a,b,c,d;for(d=[],b=0,c=q.length;c>b;b++)a=q[b],d.push(k(a,"hide"));return d},G=function(){var a,b,c,d;for(d=[],b=0,c=r.length;c>b;b++)a=r[b],d.push(k(a,"hide"));return d},F=function(){var a,b,c,d;for(d=[],b=0,c=o.length;c>b;b++)a=o[b],d.push(k(a,"hide"));return d},E=function(){return G(),F(),J()},T=function(a){return L(v(a),"hide"),setTimeout("scrollTo(0, 0)",0)},u=function(a,b){return L(v(a),"hide"),setTimeout(function(){return L(v(a),b),setTimeout("scrollTo(0, 0)",0)},0)},M=function(a,b){var c;return c=v(a),b?(k(c,b),setTimeout(function(){return k(c,"hide")},400)):k(c,"hide"),setTimeout("scrollTo(0, 0)",0)},x=function(){return N.hash.replace("#","")},O=function(a){return X.innerHTML=a},Q=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,w;if(f=a.split("-"),!(f.length<=1&&""===f[0])){if(q=R.split("-"),f.splice(0,1),q.splice(0,1),j=f[f.length-1],a!==R){for(w={},i=0,l=q.length;l>i;i++)e=q[i],e&&(w[e]=1);for(n=0,m=f.length;m>n;n++)e=f[n],e&&(w[e]?w[e]++:w[e]=1);for(g=o=r=q.length-1;0>=r?0>=o:o>=0;g=0>=r?++o:--o)q[g]&&y[q[g]]&&1===w[q[g]]&&"function"==typeof(b=y[q[g]]).pop&&b.pop();for(g=p=0,s=f.length-1;s>=0?s>=p:p>=s;g=s>=0?++p:--p)if(f[g]&&y[f[g]]&&1===w[f[g]]){if(u=f[g],indexOf.call(t,u)>=0){v=f[g],indexOf.call(S[f[g-1]],v)>=0&&"function"==typeof(c=y[f[g]]).push&&c.push();continue}"function"==typeof(d=y[f[g]]).push&&d.push()}return R=a}for(g=h=0,k=f.length;k>h;g=++h)e=f[g],e&&y[e]&&setTimeout(function(a){return function(){var b;return"function"==typeof(b=y[a]).push?b.push():void 0}}(e),100*g)}},$=function(a){return N.hash=R+"-"+a},Z=function(a){return N.hash=R.replace("-"+a,"")},Y=function(a){return N.hash=a},{ahead:function(){return history.go(1)},back:function(){return history.go(-1)},refresh:function(){return N.reload()},pushHashStr:$,popHashStr:Z,hashJump:Y,parseAndExecuteHash:function(){return Q(x())}}}(),h=void 0,g=function(){var c,d;return d=null,c=function(){function c(){}var d,e;return e=a.localStorage,d=b.documentElement,e||(d.type.behavior="url(#default#userData)"),c.prototype.set=function(a,b,c){return e?e.setItem(a,b,c):(d.setAttribute(a,value),d.save(c||"default"))},c.prototype.get=function(a,b){return e?e.getItem(a,b):(d.load(b||"default"),d.getAttribute(a)||"")},c.prototype.rm=function(a,b){return e?e.removeItem(a,b):(b=b||"default",d.load(b),d.removeAttribute(a),d.save(b))},c.prototype.clear=function(){return e?e.clear():d.expires=-1},c}(),{getInstance:function(){return null===d&&(d=new c),
d},initial:function(){return E=this.getInstance()}}}(),o=function(a){var b,c;return b=this,"undefined"!=typeof wx?(c=!1,wx.config({debug:!1,appId:""+a.appid,timestamp:a.timestamp,nonceStr:""+a.noncestr,signature:""+a.signature,jsApiList:["chooseWXPay"]}),wx.ready(function(){return c?void 0:wx.chooseWXPay({timestamp:a.timestamp,nonceStr:""+a.noncestr,"package":""+a["package"],signType:"MD5",paySign:""+a.signMD,success:function(b){return"function"==typeof a.always&&a.always(),"chooseWXPay:ok"===b.errMsg?(C("success"),"function"==typeof a.callback?a.callback():void 0):C("fail",error("wx_result_fail",b.errMsg))},cancel:function(b){return"function"==typeof a.always&&a.always(),C("cancel")},fail:function(b){return"function"==typeof a.always&&a.always(),C("fail",error("wx_config_fail",b.errMsg))}})}),wx.error(function(b){return"function"==typeof a.always&&a.always(),c=!0,C("fail",error("wx_config_error",b.errMsg))})):void 0},C=function(a,b){return"function"==typeof this._resultCallback?("undefined"==typeof b&&(b=this._error()),this._resultCallback(a,b)):void 0},a.onload=function(){return g.initial(),j.initial(),i.initial(),c.initial(),d.initial(),e.initial(),""===location.hash?setTimeout(function(){return A.hashJump("-Home"),setTimeout(function(){return A.pushHashStr("Menu"),setTimeout(function(){return A.pushHashStr("x")},100)},100)},100):A.parseAndExecuteHash(),new N({displayCSSSelector:"#Activity-page .header-display-list",chooseCSSSelector:"#Activity-page .choose-dot-list",scale:200/375,delay:3e3})}}(window,document);