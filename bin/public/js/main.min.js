/*! braeco_client 2015-11-29 */
var getDishJSON=function(){var a='[{"0":{"0":{"0":{"id":125,"name":"1","price":2},"1":{"id":126,"name":"2","price":3},"2":{"id":127,"name":"3","price":4},"groupid":83,"groupname":"233"},"dishid":36,"dishname":"雪顶冰茶","dishname2":"Snowcap Tea","dishpic":"http://static.brae.co/images/dish/0fjlhjen3o9i52a3rout5ospkc7hawzb.png","defaultprice":12,"tag":"212","dc_type":"limit","dc":45},"1":{"dishid":33,"dishname":"柠檬红茶","dishname2":"Lemon Tea","dishpic":"http://static.brae.co/images/dish/76nf7n7cjdelmrp46cok9ii6se0h2ak9.png","defaultprice":12,"tag":null,"dc_type":"none"},"2":{"0":{"0":{"id":137,"name":"2","price":2},"groupid":88,"groupname":"属性组1"},"dishid":106,"dishname":"23","dishname2":"","dishpic":"http://static.brae.co/images/dish/exvbv462dhmlyj3fed3z0avmlvbaf2qt.png","defaultprice":23,"tag":null,"dc_type":"none"},"3":{"0":{"0":{"id":128,"name":"a","price":1},"1":{"id":129,"name":"b","price":2},"groupid":84,"groupname":"属性组1"},"1":{"0":{"id":130,"name":"c","price":1},"1":{"id":138,"name":"","price":1},"groupid":85,"groupname":"属性组2"},"dishid":103,"dishname":"哈哈","dishname2":"aa","dishpic":"http://static.brae.co/images/dish/nktebx8d1zwukflj2zsugur34tdkp1kd.png","defaultprice":10,"tag":null,"dc_type":"none"},"4":{"dishid":81,"dishname":"shfhsh","dishname2":"adgg","dishpic":"http://static.brae.co/images/dish/qq0nbdadq8jskoq0fbf4ko4u3po4ot6e.png","defaultprice":5,"tag":null,"dc_type":"none"},"5":{"0":{"0":{"id":64,"name":"1","price":1},"groupid":38,"groupname":"12"},"dishid":31,"dishname":"桂圆红枣茶","dishname2":"Longon Dates Tea","dishpic":"http://static.brae.co/images/dish/u5fzmktf1f7o21uo7vx6w210jrhp5kc0.png","defaultprice":11,"tag":"热销","dc_type":"half"},"categoryid":9,"categoryname":"健康茶饮啊啊啊"},{"0":{"dishid":96,"dishname":"喔","dishname2":"23","dishpic":"http://static.brae.co/images/dish/dfptc0sea7n0eudtkl5xh49cd7ci5hgi.png","defaultprice":0.01,"tag":null,"dc_type":"discount","dc":20},"1":{"0":{"0":{"id":105,"name":"hh","price":0},"1":{"id":101,"name":"啊啊啊啊哈哈","price":999},"groupid":68,"groupname":"属性组啊噢噢"},"1":{"0":{"id":100,"name":"宝宝宝宝宝宝","price":0},"groupid":66,"groupname":"属性组噢噢属"},"dishid":76,"dishname":"哈哈哈哈3","dishname2":"212312jjjjj","dishpic":"http://static.brae.co/images/dish/y1ej0mw11pzmk5fnjm5npx4hjeqxl0yk.png","defaultprice":176.34,"tag":"好","dc_type":"half"},"categoryid":11,"categoryname":"店长推荐  "},{"0":{"dishid":41,"dishname":"黑森林蛋糕","dishname2":"Dark Forest Cake","dishpic":"http://static.brae.co/images/dish/9f9u52gqj86e72r56tyn08dc244w3c7c.png","defaultprice":17,"tag":"店长推荐","dc_type":"half"},"1":{"0":{"0":{"id":83,"name":"巧克力","price":1},"1":{"id":123,"name":"蓝莓","price":2},"groupid":56,"groupname":"属性组1"},"dishid":39,"dishname":"慕斯蛋糕","dishname2":"Mousse Cake","dishpic":"http://static.brae.co/images/dish/0tljzbtadorhn64jmtt92dualzsypz1q.png","defaultprice":15,"tag":"热销","dc_type":"discount","dc":80},"2":{"dishid":40,"dishname":"栗子蛋糕","dishname2":"Chestnut Cake","dishpic":"http://static.brae.co/images/dish/5kir1umk5tlu2wtcdck7nz49vhqqf3ck.png","defaultprice":17,"tag":null,"dc_type":"sale","dc":2},"categoryid":10,"categoryname":"蛋糕 你"},{"0":{"0":{"0":{"id":39,"name":"港式","price":1},"1":{"id":40,"name":"鸳鸯","price":3},"2":{"id":38,"name":"经典","price":18},"groupid":18,"groupname":"主题"},"1":{"0":{"id":33,"name":"冷","price":16},"1":{"id":34,"name":"热","price":19},"groupid":16,"groupname":"温度"},"dishid":29,"dishname":"主题奶茶","dishname2":"Theme milk tea","dishpic":"http://static.brae.co/images/dish/bqm3y6xclneemzuncr226hbmohjxcbco.png","defaultprice":13,"tag":null,"dc_type":"half"},"1":{"dishid":43,"dishname":"经典奶茶","dishname2":"classic millk tea","dishpic":"http://static.brae.co/images/dish/vnncrcp8vkfkkvq8zqdmurjj0snza4e5.png","defaultprice":15,"tag":null,"dc_type":"none"},"2":{"dishid":62,"dishname":"奶盖茶饮","dishname2":"milk tea","dishpic":"http://static.brae.co/images/dish/v7uvlqdwe0b4c2oofybr0h6ctn8jblv6.png","defaultprice":9,"tag":"呢呢呢","dc_type":"half"},"categoryid":8,"categoryname":"奶 "},{"0":{"0":{"0":{"id":27,"name":"加冰","price":1},"1":{"id":26,"name":"焦糖","price":2},"groupid":13,"groupname":"做法"},"dishid":25,"dishname":"拿铁","dishname2":"Latte","dishpic":"http://static.brae.co/images/dish/juhvz6fyznnajkcjk6t1okrhq2ij7ivq.png","defaultprice":20,"tag":"热销","dc_type":"sale","dc":2},"1":{"0":{"0":{"id":110,"name":"1","price":1},"1":{"id":109,"name":"2","price":2},"2":{"id":111,"name":"3","price":2},"groupid":72,"groupname":"属性组2"},"1":{"0":{"id":25,"name":"热","price":9},"1":{"id":23,"name":"冰","price":15},"groupid":12,"groupname":"温度"},"dishid":23,"dishname":"艾晨斯特调","dishname2":"Actions Special Made","dishpic":"http://static.brae.co/images/dish/jp3o0x8xkaxy5y8pfui9hq137a0t4mto.png","defaultprice":13,"tag":"hh","dc_type":"sale","dc":1},"2":{"dishid":27,"dishname":"摩卡奇诺","dishname2":"Mochacino","dishpic":"http://static.brae.co/images/dish/pbjyz1lb1uvseigf55fe13p37e9dgd36.png","defaultprice":20,"tag":null,"dc_type":"none"},"categoryid":7,"categoryname":"美式咖啡"}]';return a},getActivityJSON=function(){var a='[{"date_begin":"2015-10-09","date_end":"2015-10-30","id":54,"dinnerid":3,"title":"afasd<span>（已经结束）</span>","intro":null,"content":"asdfafsafsaf","pic":"http://static.brae.co/images/activity/agwqur54o8qyndj4892r0opqfsamsx93.png?imageView2/1/w/120/h/120","button":0,"is_valid":false,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/agwqur54o8qyndj4892r0opqfsamsx93.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-02","date_end":"2015-10-17","id":55,"dinnerid":3,"title":"test<span>（已经结束）</span>","intro":"asdfasfsa","content":"asdfasfdasdfasfd","pic":"http://static.brae.co/images/activity/ijtfm9usr37ug1c9s7ti9dp901qlez4x.png?imageView2/1/w/120/h/120","button":0,"is_valid":false,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/ijtfm9usr37ug1c9s7ti9dp901qlez4x.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-08","date_end":"2015-10-29","id":56,"dinnerid":3,"title":"大师傅撒<span>（已经结束）</span>","intro":"asdfasfsa","content":"阿斯顿发顺丰","pic":"http://static.brae.co/images/activity/ixc567xya4tr660ydugn76w77nsmmwj5.png?imageView2/1/w/120/h/120","button":0,"is_valid":false,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/ixc567xya4tr660ydugn76w77nsmmwj5.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-02","date_end":"2015-12-31","id":59,"dinnerid":3,"title":"asdfasdf","intro":"全场满<strong>10</strong>减<strong>2</strong>","content":"fdsadsdagdsag","pic":"http://static.brae.co/images/activity/9xad2qruww3ffse5n82vhl179e0m6xog.png?imageView2/1/w/120/h/120","button":0,"is_valid":true,"type":"reduce","detail":[{"least":10,"reduce":2}],"cover":"http://static.brae.co/images/activity/9xad2qruww3ffse5n82vhl179e0m6xog.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-01","date_end":"2015-10-30","id":64,"dinnerid":3,"title":"阿什福<span>（已经结束）</span>","intro":null,"content":"发士大夫撒法","pic":"http://static.brae.co/images/activity/2z2mfz7rw7mhn2irzm2j19vn9w2c4dt7.png?imageView2/1/w/120/h/120","button":0,"is_valid":false,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/2z2mfz7rw7mhn2irzm2j19vn9w2c4dt7.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-01","date_end":"2015-10-31","id":66,"dinnerid":3,"title":"asd<span>（已经结束）</span>","intro":null,"content":"123","pic":"http://static.brae.co/images/activity/m76comqsbrzfjbgkfaf1ogre2c5kzs9l.png?imageView2/1/w/120/h/120","button":0,"is_valid":false,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/m76comqsbrzfjbgkfaf1ogre2c5kzs9l.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-01","date_end":"2015-10-23","id":67,"dinnerid":3,"title":"1234<span>（已经结束）</span>","intro":null,"content":"123","pic":"http://static.brae.co/images/activity/umr7nsvg7zrbwbr2c984f9pgq9jigzsa.png?imageView2/1/w/120/h/120","button":0,"is_valid":false,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/umr7nsvg7zrbwbr2c984f9pgq9jigzsa.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-01","date_end":"2015-12-31","id":69,"dinnerid":3,"title":"123","intro":"全场满<strong>222</strong>送<strong>你好</strong>","content":"123","pic":"http://static.brae.co/images/activity/pgo2cq0nss5cc81v7ar2wplw5wexehq4.png?imageView2/1/w/120/h/120","button":0,"is_valid":true,"type":"give","detail":[{"least":222,"dish":"你好"}],"cover":"http://static.brae.co/images/activity/pgo2cq0nss5cc81v7ar2wplw5wexehq4.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-01","date_end":"2015-12-16","id":73,"dinnerid":3,"title":"213","intro":null,"content":"21","pic":"http://static.brae.co/images/activity/zkd1jixngl25u8hif0546rnuw2818437.png?imageView2/1/w/120/h/120","button":0,"is_valid":true,"type":"theme","detail":[],"cover":"http://static.brae.co/images/activity/zkd1jixngl25u8hif0546rnuw2818437.png?imageView2/1/w/432/h/240"},{"date_begin":"2015-10-01","date_end":"2015-12-31","id":74,"dinnerid":3,"title":"测试","intro":"啊","content":"1","pic":"http://static.brae.co/images/activity/9xnqj4sljc7yf4v0v55da3v8a9d2slo1.png?imageView2/1/w/120/h/120","button":0,"is_valid":true,"type":"other","detail":"啊","cover":"http://static.brae.co/images/activity/9xnqj4sljc7yf4v0v55da3v8a9d2slo1.png?imageView2/1/w/432/h/240"}]';return a},getMemberJSON=function(){var a='{"message":"success","user":4,"birthday":0,"nickname":"Casta","sex":"男","province":"广东","city":"东莞","country":"中国","avatar":"http://static.brae.co/images/avatar/q13xybp6x3102no7pn8r6g91gz070oeq.png?imageView2/1/w/60/h/60","signature":"天涯咫尺","register_time":1436878924,"mobile":"18819473259","membership":{"ladder":[{"name":"黑铁","EXP":0,"discount":100},{"name":"青铜","EXP":1000,"discount":90},{"name":"白银","EXP":2000,"discount":88},{"name":"黄金","EXP":3000,"discount":85},{"name":"白金","EXP":5000,"discount":80},{"name":"钻石","EXP":8000,"discount":75}],"EXP":34100,"balance":3899.43}}';return a},getComPreJSON=function(){var a="15";return a},indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};!function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;return H=[util.addListener,util.removeListener,util.hasClass,util.addClass,util.removeClass,util.ajax,util.getElementsByClassName,util.isPhone,util.hidePhone,util.query,util.querys,util.remove,util.append,util.prepend,util.toggleClass,util.getObjectURL,util.deepCopy,util.getById,util.createDom],k=H[0],K=H[1],x=H[2],j=H[3],J=H[4],l=H[5],u=H[6],B=H[7],z=H[8],F=H[9],G=H[10],I=H[11],m=H[12],E=H[13],M=H[14],w=H[15],s=H[16],t=H[17],r=H[18],p=b.body.clientWidth,o=b.documentElement.clientHeight,C=null,N=null,q=["","-webkit-","-moz-","-ms-","-o-"],D=["零","一","二","三","四","五","六","七","八","九","十"],v=function(a){return"string"==typeof a&&(a=JSON.parse(a)),a},d=function(){function a(a){s(a,this),this.init(),w(),e.push(this)}var b,c,d,e,f,g,h,i,l,n,o,p,q,t,u,w,x;return f=F("#Menu-page .category-display-list"),b=F("#book-category-wrap .tag-list"),h=F("#book-dish-wrap .food-list-wrap"),c=0,e=[],d=0,x={letter:10,number:11,space:6,chinese:16},n=function(a){var b,c,d,e;return b=r("li"),b.id="category-"+a.seqNum,e=a.url||"",c="<img alt='标签' class='category-img' src="+e+">",d="<div class='category-name-field'><p class='category-name'>"+a.name+"</div>",b.innerHTML=""+c+d,m(f,b),b},i=function(a){var d,e;return d=r("li"),d.id="tag-list-"+a.seqNum,d.innerHTML=a.name,e=p(a.name),d.style.width=e+"px",m(b,d),c+=e+30,d},o=function(a){var b;return b=r("ul"),b.id="food-list-"+a.seqNum,b.className="hide",m(h,b),b},p=function(a){var b,c,d,e,f,g,h;return c=a.match(/[a-z]/gi)||[],e=a.match(/[0-9]/gi)||[],g=a.match(/\s/gi)||[],d=c.length,f=e.length,h=g.length,b=a.length-d-f-h,x.letter*d+x.number*f+x.space*h+x.chinese*b+1},w=function(){return b.style.width=c+"px"},q=function(){var a,b,c,d;for(d=[],b=0,c=e.length;c>b;b++)a=e[b],d.push(j(a.foodListDom,"hide"));return d},u=function(){var a,b,c,d;for(d=[],b=0,c=e.length;c>b;b++)a=e[b],d.push(J(a.bookCategoryDom,"choose"));return d},g=function(){return u(),q(),l(),j(e[d].bookCategoryDom,"choose"),J(e[d].foodListDom,"hide"),setTimeout(function(){return e[d].bookCategoryDom.scrollIntoView()},0)},t=function(a){return d=a,C.set("categoryCurrentChoose",a)},l=function(){var a;return a=C.get("categoryCurrentChoose")||0,d=e[a]?Number(a):0},a.prototype.init=function(){return this.initDisplayDom(),this.initBookCategoryDom(),this.initFoodListDom(),this.initEvent()},a.prototype.initDisplayDom=function(){return this.displayDom=n(this)},a.prototype.initBookCategoryDom=function(){return this.bookCategoryDom=i(this)},a.prototype.initFoodListDom=function(){return this.foodListDom=o(this)},a.prototype.initEvent=function(){var a;return a=this,k(a.displayDom,"click",function(){return t(a.seqNum),y.hashJump("-Detail-Book-bookCol")}),k(a.bookCategoryDom,"click",function(){return t(a.seqNum),g()})},a.initial=function(){var b,c,d,e,f,g,h;for(c=v(getDishJSON()),g=[],d=e=0,f=c.length;f>e;d=++e)h=c[d],g.push(b=new a({name:h.categoryname,id:h.id,seqNum:d}));return g},a.chooseBookCategoryByCurrentChoose=g,a}(),e=function(){function a(a){s(a,this),this.init(),g[this.categorySeqNum].push(this)}var b,c,d,e,f,g,h,i,j,l,n,o,q,u,w,x,z,A;return c=t("book-info-wrap"),e=F(".food-img-wrapper img",c),e.style.height=200*p/375+"px",d=F(".full-part",c),f=F(".intro-wrap .intro",c),g=[],b=[0,0],j=function(a){var b,c;return b="","discount"===a.dcType?(c=a.dc,c=a.dc%10===0?D[Math.round(a.dc/10)]:a.dc/10,b="<p class='dc-label'>"+c+"折</p>"):"sale"===a.dcType?b="<p class='dc-label'>减"+a.dc+"元</p>":"half"===a.dcType?b="<p class='dc-label'>第二杯半价</p>":"limit"===a.dcType&&(b="<p class='dc-label'>剩"+a.dc+"件</p>"),b},w=function(a){var b;return b="",a.tag&&(b="<p class='tag-label'>"+a.tag+"</p>"),b},x=function(a){var b,c,d;return d=r("div"),d.className="top-wrap",c="<div class='name-field'> <p class='c-name'>"+a.cName+"</p> <p class='e-name'>"+a.eName+"</p> </div>",b="<div class='label-field'> "+j(a)+" "+w(a)+" </div>",m(d,c),m(d,b),d},u=function(a){var b;return"none"!==a.dcType&&"half"!==a.dcType&&a.dcType&&"limit"!==a.dcType?"discount"===a.dcType?b="<p class='min-price money'>"+Number((a.defaultPrice*a.dc/100).toFixed(2))+"</p>":"sale"===a.dcType&&(b="<p class='min-price money'>"+Number((a.defaultPrice-a.dc).toFixed(2))+"</p>"):b="<p class='min-price money'>"+a.defaultPrice+"</p>",b},q=function(a){var b;return b="<p class='init-price money'>"+a.defaultPrice+"</p>","none"!==a.dcType&&"half"!==a.dcType&&a.dcType&&"limit"!==a.dcType||(b=""),b},h=function(a){var b,c,d;return b=r("div"),b.className="bottom-wrap font-number-word",d="<div class='price-field'> "+u(a)+" "+q(a)+" </div>",c="<div class='controll-field'> <div class='minus-field btn hide'> <div class='img'></div> </div> <div class='number-field hide'> <p class='num'>0</p> </div> <div class='plus-field btn'> <div class='img'></div> </div> </div>",m(b,d),m(b,c),b},n=function(a){var b;return a.url?(b=r("div"),b.className="left-part",b.innerHTML="<div class='img-field'><img src='"+a.url+"'></div>",b):null},o=function(a){var b,c,d;return c=r("div"),a.url?c.className="right-part":c.className="full-part",d=x(a),b=h(a),m(c,d),m(c,b),c},l=function(a){var b,c,d,e,f,g;return c=r("li"),c.id="food-"+a.seqNum,e=r("div"),e.className="food-info-field",f=n(a),g=o(a),f&&m(e,f),m(e,g),m(c,e),d=r("div"),d.className="fivePercentLeftLine",b=F(".food-list-wrap #food-list-"+a.categorySeqNum),m(b,c),m(b,d),c},A=function(a,c){return b[0]=a,b[1]=c,C.set("foodCurrentChoose",JSON.stringify(b))},i=function(){var a;return a=C.get("foodCurrentChoose")||"[0, 0]",a=JSON.parse(a),g[a[0]][a[1]]?s(a,b):b=[0,0]},z=function(){var a,c;return c=g[b[0]][b[1]],e.src=c.url,a=F(".full-part",c.foodDom)||F(".right-part",c.foodDom),d.innerHTML=a.innerHTML,f.innerHTML=c.intro},a.prototype.init=function(){return this.initFoodDom(),this.initAllEvent()},a.prototype.initFoodDom=function(){return this.foodDom=l(this)},a.prototype.initAllEvent=function(){var a;return a=this,k(a.foodDom,"click",function(){return A(a.categorySeqNum,a.seqNum),y.pushHashStr("bookInfo")})},a.initial=function(){var b,c,d,e,f,h,i,j,k,l;for(b=v(getDishJSON()),d=f=0,j=b.length-1;j>=0?j>=f:f>=j;d=j>=0?++f:--f)b[d]&&(g[d]=[]);for(k=[],d=h=0,i=b.length;i>h;d=++h)l=b[d],e=0,k.push(function(){var b;for(b=[];l[e];)c=new a({dc:l[e].dc,dcType:l[e].dc_type,defaultPrice:l[e].defaultprice,id:l[e].dishid,cName:l[e].dishname,eName:l[e].dishname2,url:l[e].dishpic,categorySeqNum:d,seqNum:e,tag:l[e].tag,intro:l[e].intro||""}),b.push(e++);return b}());return k},a.chooseFoodByCurrentChoose=function(){return i(),z()},a}(),c=function(){function a(a){s(a,this),this.init(),b.push(this)}var b,c,d,e,f,g,h,i,j,l,n,o,q,t,u,w,x,z,A,B,D,E,G,H,I,J;return x=["promotion","theme"],f=F("#Menu-page .activity-display-list"),e=F("#Menu-page .choose-dot-list"),c=F("#Activity-page #Activity-container-column .activity-container-wrapper"),t=null,u=null,w={promotion:0,theme:0},b=[],d=0,q=F(".Activity-information-field"),i=F("#activity-info-img-field .img-field",q),h=F("img",i),o=F(".title-type",q),n=F("#activity-info-title-field .name",q),j=F("#activity-info-title-field .intro",q),l=F("#activity-info-time-field .time",q),g=F("#activity-info-content-field .content",q),i.style.height=.9*p*167/343+"px",B=function(a){var b;return b=r("li"),b.id="activity-"+a.seqNum,b.innerHTML="<img src='"+a.displayUrl+"' alt='活动详情' class='activity-img'>",m(f,b),b},A=function(a){var b;return b=r("li"),b.id="choose-dot-"+a.seqNum,b.className="inactive",b.innerHTML="<div class='dot'></div>",m(e,b),b},z=function(a){var b,c,d,e;return b=r("li"),b.id="activity-basic-info-"+a.seqNum,b.className="activity-basic-info",b.innerHTML="<img src='"+a.detailUrl+"' alt='活动详情'> <div class='info'> <p class='activity-name'>"+a.title+"</p> <p class='activity-intro'>"+a.intro+"</p> </div> <div class='arrow'></div>","theme"===a.type?(e=u,d="theme"):(e=t,d="promotion"),0!==w[d]&&(c=r("div"),c.className="fivePercentLeftLine",m(e,c)),w[d]++,m(e,b),b},D=function(a,b){var d;return d=r("div"),d.id="activity-"+a+"-field",d.innerHTML="<div class='title-field'> <p class='title'>"+b+"</p> </div> <ul class='activity-"+a+"-list'></ul>",m(c,d)},G=function(a){var b,c,d,e,f,g,h,i,j,k,l;for(c={},d=0,f=x.length;f>d;d++)l=x[d],c[l]=!1;for(e=0,g=a.length;g>e;e++)b=a[e],l=b.type||"","theme"===l?c[l]=!0:l&&(c.promotion=!0);for(j=[],i=0,h=x.length;h>i;i++)l=x[i],c[l]?(k="promotion"===l?"促销优惠":"主题活动",j.push(D(l,k))):j.push(void 0);return j},H=function(){return t=F(".activity-promotion-list",c),u=F(".activity-theme-list",c)},J=function(a){return d=a,C.set("activityCurrentChoose",a)},E=function(){var a;return a=C.get("activityCurrentChoose")||0,d=b[a]?Number(a):0},I=function(){var a,c;return a=b[d],c="theme"===a.type?"主题":"促销",h.setAttribute("src",a.detailUrl),o.innerHTML=c,n.innerHTML=a.title,j.innerHTML=a.intro,l.innerHTML=a.dateBegin+" - "+a.dateEnd,g.innerHTML=a.content},a.prototype.init=function(){return this.initActivityHomeDisplayDom(),this.initActivityHomeDisplayChooseDom(),this.initActivityDetailInfoDom(),this.initAllEvent()},a.prototype.initActivityHomeDisplayDom=function(){return this._activityHomeDisplayDom=B(this)},a.prototype.initActivityHomeDisplayChooseDom=function(){return this._activityHomeDisplayChooseDom=A(this)},a.prototype.initActivityDetailInfoDom=function(){return this._activityDetailInfoDom=z(this)},a.prototype.initAllEvent=function(){var a;return a=this,k(a._activityDetailInfoDom,"click",function(){return J(a.seqNum),y.pushHashStr("activityInfo")})},a.initial=function(){var b,c,d,e,f;for(c=v(getActivityJSON()),G(c),H(),d=e=0,f=c.length;f>e;d=++e)b=c[d],b=new a({seqNum:d,id:b.id,displayUrl:b.pic,infoUrl:b.pic,detailUrl:b.pic,dateBegin:b.date_begin,dateEnd:b.date_end,intro:b.intro||"",content:b.content,isValid:b.is_valid,title:b.title,type:b.type});return new L({displayCSSSelector:"#Menu-page .activity-display-list",chooseCSSSelector:"#Menu-page .choose-dot-list",scale:110/377,delay:3e3})},a.chooseActivityByCurrentChoose=function(){return E(),I()},a}(),i=function(){function a(a){this.tryLoginAndUpdateInfo(a)}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,u;return b=t("Individual-page"),c=F(".Already-login-field",b),o=F(".rank-field p.rank",c),q=F(".rank-field p.member-name",c),p=F(".member-img-pos #rank-img",c),i=F(".discount-field p.discount",c),d=F(".remainder-EXP-Blend p.remainder-number",c),h=F(".current-value",c),g=F(".full-value",c),f=F(".inner-bar",c),m={},n=[],k=function(a){return m.discount=Boolean(1&a),m.sale=Boolean(2&a),m.half=Boolean(4&a),m.limit=Boolean(8&a)},l=function(a){return s(a,n)},j=function(a){var b,c,d,e,f,g;for(c=!0,e=0,d=f=0,g=n.length;g>f;d=++f)if(b=n[d],b.EXP>a.EXP){e=d-1,c=!1;break}return{fullFlag:c,index:e}},u=function(a){var b;return o.innerHTML="Lv."+a.currentRank,p.className="member-rank-"+a.currentRank,q.innerHTML=a.rankName+"级会员",g.innerHTML=a.currentFullEXP,f.style.width="",b=a.discount>=100?"升级后尊享更多优惠":"VIP尊享"+(a.discount/10).toFixed(1)+"折",i.innerHTML=b},r=function(a,b,c){return a.currentRank=b,a.rankName=n[b].name,a.discount=n[b].discount,a.currentFullEXP=n[c].EXP},e=function(a){var b,c,d;return d=j(a),d.fullFlag?(c=n.length-1,b=c):(c=d.index,b=c+1),r(a,c,b),u(a)},a.prototype.isLogin=function(){return 0!==this.id},a.prototype.init=function(){return this.setBalance(this.balance),this.setCurrentEXP(this.EXP)},a.prototype.setBalance=function(a){return this.balance=a,d.innerHTML=this.balance},a.prototype.setCurrentEXP=function(a){return this.EXP=a,h.innerHTML=this.EXP,e(this),f.style.width=100*this.EXP/this.currentFullEXP+"%"},a.prototype.tryLoginAndUpdateInfo=function(a){return s(a,this),this.init()},a.initial=function(){var b,c;return b=v(getComPreJSON()),c=v(getMemberJSON()),k(b),l(c.membership.ladder),N=new a({avatar:c.avatar,birthday:c.birthday,city:c.city,country:c.country,mobile:c.mobile,nickName:c.nickname,province:c.province,registerTime:c.register_time,sex:c.sex,signature:c.signature,id:c.user,EXP:c.membership.EXP,balance:c.membership.balance})},a}(),L=function(){function a(a){var b,c,d,e;for(s(a,this),this.displayUlDom=F(this.displayCSSSelector),this.chooseUlDom=F(this.chooseCSSSelector),e=G("img",this.displayUlDom),c=0,d=e.length;d>c;c++)b=e[c],b.style.height=this.scale*p+"px";this.init()}var b,c,d,e,f;return c=function(a,b){var c,d,e,f;for(f={},d=0,e=q.length;e>d;d++)c=q[d],f[c+"transform"]="translate("+a+", "+b+")";return f},b=function(a){var c,d;return d=a,d._autoFlag?(c=(d.currentChoose+1)%d.activityNum,d.setCurrentChooseAndTranslate(c)):d._autoFlag=!0,setTimeout(function(){return b(d)},d.delay)},f=function(a,b){return b._autoFlag=!1,b.startX=a.touches[0].clientX,b.startY=a.touches[0].clientY,b.currentX=a.touches[0].clientX,b.currentY=a.touches[0].clientY},e=function(a,b){return a.preventDefault(),a.stopPropagation(),b._autoFlag=!1,b.currentX=a.touches[0].clientX,b.currentY=a.touches[0].clientY},d=function(a,b){var c,d,e,f,g,h,i;return b._autoFlag=!1,e=b.currentX,f=b.currentY,g=b.startX,h=b.startY,Math.abs(f-h)>=Math.abs(e-g)?void 0:(d=b.currentChoose,c=b.activityNum,g>e?i=(d+1)%c:e>g&&(i=(d-1+c)%c),b.setCurrentChooseAndTranslate(i))},a.prototype.init=function(){return this.initDisplay(),this.initChoose(),this.initAutoRotate(),this.initTouchEvent()},a.prototype.initDisplay=function(){var a,b,c,d;for(this.displayContainerDom=this.displayUlDom.parentNode,this.displayContainerDom.style.overflowX="hidden",this.allDisplayDom=G("li",this.displayUlDom),d=this.allDisplayDom,b=0,c=d.length;c>b;b++)a=d[b],a.style.width=p+"px";return this.activityNum=this.allDisplayDom.length,this.displayUlDom.style.width=p*this.activityNum+"px"},a.prototype.initChoose=function(){var a,b,c,d,e,f,g;for(this.chooseUlDom.parentNode.style.overflow="hidden",g=this,this.allChooseDom=G("li",this.chooseUlDom),this.chooseUlDom.style.width=20*this.allChooseDom.length+"px",this.currentChoose=0,this.allChooseDom[0].className="active",e=this.allChooseDom,f=[],b=c=0,d=e.length;d>c;b=++c)a=e[b],f.push(k(a,"click",function(a){return function(b){return b.preventDefault(),b.stopPropagation(),g._autoFlag=!1,g.setCurrentChooseAndTranslate(a)}}(b)));return f},a.prototype.initAutoRotate=function(){var a;return a=this,this._autoFlag=!0,setTimeout(function(){return b(a)},a.delay)},a.prototype.initTouchEvent=function(){var a;return a=this,k(a.displayContainerDom,"touchstart",function(b){return f(b,a)}),k(a.displayContainerDom,"touchmove",function(b){return e(b,a)}),k(a.displayContainerDom,"touchend",function(b){return d(b,a)})},a.prototype.setCurrentChoose=function(a){return this.allChooseDom[this.currentChoose].className="inactive",this.allChooseDom[a].className="active",this.currentChoose=a},a.prototype.setCurrentChooseAndTranslate=function(a){var b,d,e,f;if(!(0>a||a>=this.activityNum||a===this.currentChoose)){e=-1*a,b=c(e*p+"px",0);for(d in b)f=b[d],this.displayUlDom.style[d]=f;return this.setCurrentChoose(a)}},a}(),f=function(){var a,b;return b=t("Recharge-func"),k(b,"click",function(){return y.pushHashStr("Extra-extraContent-Recharge")}),a=t("recharge-confirm-column"),k(a,"click",function(){return y.pushHashStr("choosePaymentMethod")})}(),y=function(){var b,f,g,h,i,l,m,n,o,p,q,r,s,u,v,w,x,y,z,A,B,C,D,E,H,I,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y;return b=function(){var a,b,c,d;return b="",a=G("#nav-field .bottom-field div"),d=function(){var b,c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)b=a[d],c=b.id,b.className=c+"-unchecked",f.push(L(c+"-page"));return f},c=function(a){return b=a,d(),t(a).className=a+"-checked",R(a+"-page")},{bottomTouchEventTrigger:c,uncheckAllForBottomAndHideTarget:d}}(),f=function(){var a;return a=F("#Menu-page .activity-wrapper"),k(a,"click",function(){return W("-Detail-Activity")})}(),w=t("#extra"),q=G(".main-page"),r=G(".main-home-page"),o=G(".main-detail-page"),l=G(".extra-page"),m=G(".extra-form-page"),h=G(".extra-content-page"),g=F(".Activity-information-field"),u=["activityInfo"],Q={Activity:["activityInfo"]},s=["Menu-page","Already-page","Individual-page"],p=["Book-page","Activity-page"],n=["login-page","book-choose-page","remark-for-trolley-page","alert-page","confirm-page"],i=["Recharge-page","Choose-payment-method-page"],M=a.location,y={Home:{push:function(){return R("brae-home-page")},pop:function(){return D()}},Menu:{push:function(){return b.bottomTouchEventTrigger("Menu")},pop:b.uncheckAllForBottomAndHideTarget,title:"餐牌"},Already:{push:function(){return b.bottomTouchEventTrigger("Already")},pop:b.uncheckAllForBottomAndHideTarget,title:"已点订单"},Individual:{push:function(){return b.bottomTouchEventTrigger("Individual")},pop:b.uncheckAllForBottomAndHideTarget,title:"个人信息"},Detail:{push:function(){return R("brae-detail-page")},pop:function(){return D()}},Book:{push:function(){return R("Book-page")},pop:function(){return L("Book-page")}},bookCol:{push:function(){return d.chooseBookCategoryByCurrentChoose(),R("book-order-column")},pop:function(){return L("book-order-column")}},bookInfo:{push:function(){return e.chooseFoodByCurrentChoose(),v("book-info-wrap","hide-right")},pop:function(){return L("book-info-wrap","hide-right")}},bookOrder:{push:function(){return v("book-order-wrap","hide-left")},pop:function(){return L("book-order-wrap","hide-left")}},Activity:{push:function(){return R("Activity-page")},pop:function(){return L("Activity-page")}},activityInfo:{push:function(){return c.chooseActivityByCurrentChoose(),U("activityInfo","Activity",g)},pop:function(){return K(g)}},Extra:{push:function(){return R("extra")},pop:function(){return L("extra")}},extraContent:{push:function(){return R("brae-payment-page")},pop:function(){return L("brae-payment-page")}},Recharge:{push:function(){return R("Recharge-page")},pop:function(){return L("Recharge-page")}},choosePaymentMethod:{push:function(){return R("Choose-payment-method-page")},pop:function(){return L("Choose-payment-method-page")}},x:{push:function(){return setTimeout(function(){return X("x")},0)},pop:function(){return setTimeout(function(){return X("x")},0)}}},k(a,"popstate",function(){return O(x())}),V=util.query("title"),P=M.hash.replace("#",""),S=function(a){return setTimeout(function(){return R("extra")},0),indexOf.call(i,a)>=0?(setTimeout(function(){return R("brae-payment-page")},50),setTimeout(function(){return v(a,"hide")},100)):indexOf.call(n,a)>=0?R("brae-form-page"):void 0},C=function(){var a,b,c,d;for(d=[],b=0,c=l.length;c>b;b++)a=l[b],d.push(j(a,"hide"));return d},B=function(){var a,b,c,d;for(d=[],b=0,c=m.length;c>b;b++)a=m[b],d.push(j(a,"hide"));return d},A=function(){var a,b,c,d;for(d=[],b=0,c=h.length;c>b;b++)a=h[b],d.push(j(a,"hide"));return d},z=function(a){return B(),A(),C(),L("extra")},T=function(a){return D(),indexOf.call(s,a)>=0?R("brae-home-page"):indexOf.call(p,a)>=0&&R("brae-detail-page"),R(a),setTimeout("scrollTo(0, 0)",0)},U=function(a,b,c){return indexOf.call(Q[b],a)>=0&&J(c,"hide-right"),setTimeout("scrollTo(0, 0)",0)},K=function(a){return j(a,"hide-right")},I=function(){var a,b,c,d;for(d=[],b=0,c=q.length;c>b;b++)a=q[b],d.push(j(a,"hide"));return d},H=function(){var a,b,c,d;for(d=[],b=0,c=r.length;c>b;b++)a=r[b],d.push(j(a,"hide"));return d},E=function(){var a,b,c,d;for(d=[],b=0,c=o.length;c>b;b++)a=o[b],d.push(j(a,"hide"));return d},D=function(){return H(),E(),I()},R=function(a){return J(t(a),"hide"),setTimeout("scrollTo(0, 0)",0)},v=function(a,b){return J(t(a),"hide"),setTimeout(function(){return J(t(a),b),setTimeout("scrollTo(0, 0)",0)},0)},L=function(a,b){var c;return c=t(a),b?(j(c,b),setTimeout(function(){return j(c,"hide")},400)):j(c,"hide"),setTimeout("scrollTo(0, 0)",0)},x=function(){return M.hash.replace("#","")},N=function(a){return V.innerHTML=a},O=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,v,w;if(f=a.split("-"),!(f.length<=1&&""===f[0])){if(q=P.split("-"),f.splice(0,1),q.splice(0,1),j=f[f.length-1],a!==P){for(w={},i=0,l=q.length;l>i;i++)e=q[i],e&&(w[e]=1);for(n=0,m=f.length;m>n;n++)e=f[n],e&&(w[e]?w[e]++:w[e]=1);for(g=o=r=q.length-1;0>=r?0>=o:o>=0;g=0>=r?++o:--o)q[g]&&y[q[g]]&&1===w[q[g]]&&"function"==typeof(b=y[q[g]]).pop&&b.pop();for(g=p=0,s=f.length-1;s>=0?s>=p:p>=s;g=s>=0?++p:--p)if(f[g]&&y[f[g]]&&1===w[f[g]]){if(t=f[g],indexOf.call(u,t)>=0){v=f[g],indexOf.call(Q[f[g-1]],v)>=0&&"function"==typeof(c=y[f[g]]).push&&c.push();continue}"function"==typeof(d=y[f[g]]).push&&d.push()}return P=a}for(g=h=0,k=f.length;k>h;g=++h)e=f[g],e&&y[e]&&setTimeout(function(a){return function(){var b;return"function"==typeof(b=y[a]).push?b.push():void 0}}(e),100*g)}},Y=function(a){return M.hash=P+"-"+a},X=function(a){return M.hash=P.replace("-"+a,"")},W=function(a){return M.hash=a},{ahead:function(){return history.go(1)},back:function(){return history.go(-1)},refresh:function(){return M.reload()},pushHashStr:Y,popHashStr:X,hashJump:W,HomeBottom:b,parseAndExecuteHash:function(){return O(x())}}}(),h=void 0,g=function(){var c,d;return d=null,c=function(){function c(){}var d,e;return e=a.localStorage,d=b.documentElement,e||(d.type.behavior="url(#default#userData)"),c.prototype.set=function(a,b,c){return e?e.setItem(a,b,c):(d.setAttribute(a,value),d.save(c||"default"))},c.prototype.get=function(a,b){return e?e.getItem(a,b):(d.load(b||"default"),d.getAttribute(a)||"")},c.prototype.rm=function(a,b){return e?e.removeItem(a,b):(b=b||"default",d.load(b),d.removeAttribute(a),d.save(b))},c.prototype.clear=function(){return e?e.clear():d.expires=-1},c}(),{getInstance:function(){return null===d&&(d=new c),d},initial:function(){return C=this.getInstance()}}}(),n=function(a){var b,c;return b=this,"undefined"!=typeof wx?(c=!1,wx.config({debug:!1,appId:""+a.appid,timestamp:a.timestamp,nonceStr:""+a.noncestr,signature:""+a.signature,jsApiList:["chooseWXPay"]}),wx.ready(function(){return c?void 0:wx.chooseWXPay({timestamp:a.timestamp,nonceStr:""+a.noncestr,"package":""+a["package"],signType:"MD5",paySign:""+a.signMD,success:function(b){return"function"==typeof a.always&&a.always(),"chooseWXPay:ok"===b.errMsg?(A("success"),"function"==typeof a.callback?a.callback():void 0):A("fail",error("wx_result_fail",b.errMsg))},cancel:function(b){return"function"==typeof a.always&&a.always(),A("cancel");
},fail:function(b){return"function"==typeof a.always&&a.always(),A("fail",error("wx_config_fail",b.errMsg))}})}),wx.error(function(b){return"function"==typeof a.always&&a.always(),c=!0,A("fail",error("wx_config_error",b.errMsg))})):void 0},A=function(a,b){return"function"==typeof this._resultCallback?("undefined"==typeof b&&(b=this._error()),this._resultCallback(a,b)):void 0},a.onload=function(){return g.initial(),i.initial(),c.initial(),d.initial(),e.initial(),""===location.hash?setTimeout(function(){return y.hashJump("-Home"),setTimeout(function(){return y.pushHashStr("Menu"),setTimeout(function(){return y.pushHashStr("x")},100)},100)},100):y.parseAndExecuteHash(),new L({displayCSSSelector:"#Activity-page .header-display-list",chooseCSSSelector:"#Activity-page .choose-dot-list",scale:200/375,delay:3e3})}}(window,document);